<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>6 Downsampling | wet-dry-analysis.knit</title>
  <meta name="description" content="" />
  <meta name="generator" content="bookdown 0.41 and GitBook 2.6.7" />

  <meta property="og:title" content="6 Downsampling | wet-dry-analysis.knit" />
  <meta property="og:type" content="book" />
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="6 Downsampling | wet-dry-analysis.knit" />
  
  
  




  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="total-wetdry.html"/>
<link rel="next" href="proportions-wet.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>
<link href="libs/htmltools-fill-0.5.8.1/fill.css" rel="stylesheet" />
<script src="libs/htmlwidgets-1.6.4/htmlwidgets.js"></script>
<script src="libs/plotly-binding-4.10.4/plotly.js"></script>
<script src="libs/typedarray-0.1/typedarray.min.js"></script>
<link href="libs/crosstalk-1.2.1/css/crosstalk.min.css" rel="stylesheet" />
<script src="libs/crosstalk-1.2.1/js/crosstalk.min.js"></script>
<link href="libs/plotly-htmlwidgets-css-2.11.1/plotly-htmlwidgets.css" rel="stylesheet" />
<script src="libs/plotly-main-2.11.1/plotly-latest.min.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
  
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Wet-Dry Analysis</a></li>
<li class="chapter" data-level="2" data-path="clean-up.html"><a href="clean-up.html"><i class="fa fa-check"></i><b>2</b> Clean-up</a>
<ul>
<li class="chapter" data-level="2.1" data-path="clean-up.html"><a href="clean-up.html#getting-started"><i class="fa fa-check"></i><b>2.1</b> Getting started</a></li>
<li class="chapter" data-level="2.2" data-path="clean-up.html"><a href="clean-up.html#metadata"><i class="fa fa-check"></i><b>2.2</b> Metadata</a>
<ul>
<li class="chapter" data-level="2.2.1" data-path="clean-up.html"><a href="clean-up.html#review"><i class="fa fa-check"></i><b>2.2.1</b> Review</a></li>
<li class="chapter" data-level="2.2.2" data-path="clean-up.html"><a href="clean-up.html#housekeeping"><i class="fa fa-check"></i><b>2.2.2</b> Housekeeping</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="clean-up.html"><a href="clean-up.html#deg-files"><i class="fa fa-check"></i><b>2.3</b> DEG files</a></li>
<li class="chapter" data-level="2.4" data-path="clean-up.html"><a href="clean-up.html#cleaning-degs"><i class="fa fa-check"></i><b>2.4</b> Cleaning DEGs</a></li>
<li class="chapter" data-level="2.5" data-path="clean-up.html"><a href="clean-up.html#clipping-degs"><i class="fa fa-check"></i><b>2.5</b> Clipping DEGS</a></li>
<li class="chapter" data-level="2.6" data-path="clean-up.html"><a href="clean-up.html#parallel-batch-clipping"><i class="fa fa-check"></i><b>2.6</b> Parallel Batch-clipping</a>
<ul>
<li class="chapter" data-level="2.6.1" data-path="clean-up.html"><a href="clean-up.html#testing"><i class="fa fa-check"></i><b>2.6.1</b> Testing</a></li>
<li class="chapter" data-level="2.6.2" data-path="clean-up.html"><a href="clean-up.html#final-clip"><i class="fa fa-check"></i><b>2.6.2</b> Final clip</a></li>
</ul></li>
<li class="chapter" data-level="2.7" data-path="clean-up.html"><a href="clean-up.html#deg-file-issues"><i class="fa fa-check"></i><b>2.7</b> DEG File Issues</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="wet-dry-switches.html"><a href="wet-dry-switches.html"><i class="fa fa-check"></i><b>3</b> Wet-Dry Switches</a>
<ul>
<li class="chapter" data-level="3.1" data-path="wet-dry-switches.html"><a href="wet-dry-switches.html#calculating-switches"><i class="fa fa-check"></i><b>3.1</b> Calculating Switches</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="longest-wetdry-periods.html"><a href="longest-wetdry-periods.html"><i class="fa fa-check"></i><b>4</b> Longest Wet/Dry Periods</a></li>
<li class="chapter" data-level="5" data-path="total-wetdry.html"><a href="total-wetdry.html"><i class="fa fa-check"></i><b>5</b> Total Wet/Dry</a></li>
<li class="chapter" data-level="6" data-path="downsampling.html"><a href="downsampling.html"><i class="fa fa-check"></i><b>6</b> Downsampling</a>
<ul>
<li class="chapter" data-level="6.1" data-path="downsampling.html"><a href="downsampling.html#down-sampling-mean-wets"><i class="fa fa-check"></i><b>6.1</b> Down-sampling (MEAN wets)</a>
<ul>
<li class="chapter" data-level="6.1.1" data-path="downsampling.html"><a href="downsampling.html#hr-periods"><i class="fa fa-check"></i><b>6.1.1</b> 2hr Periods</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="7" data-path="proportions-wet.html"><a href="proportions-wet.html"><i class="fa fa-check"></i><b>7</b> Proportions Wet</a>
<ul>
<li class="chapter" data-level="7.1" data-path="proportions-wet.html"><a href="proportions-wet.html#calclate-proportions"><i class="fa fa-check"></i><b>7.1</b> Calclate Proportions</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="visualizing-metrics.html"><a href="visualizing-metrics.html"><i class="fa fa-check"></i><b>8</b> Visualizing Metrics</a>
<ul>
<li class="chapter" data-level="8.1" data-path="visualizing-metrics.html"><a href="visualizing-metrics.html#baccalieu-island-2017-2018"><i class="fa fa-check"></i><b>8.1</b> Baccalieu Island 2017-2018</a>
<ul>
<li class="chapter" data-level="8.1.1" data-path="visualizing-metrics.html"><a href="visualizing-metrics.html#running-plotting-functions"><i class="fa fa-check"></i><b>8.1.1</b> Running plotting functions</a></li>
<li class="chapter" data-level="8.1.2" data-path="visualizing-metrics.html"><a href="visualizing-metrics.html#final-plots"><i class="fa fa-check"></i><b>8.1.2</b> Final Plots</a></li>
</ul></li>
<li class="chapter" data-level="8.2" data-path="visualizing-metrics.html"><a href="visualizing-metrics.html#kent-island-2018-2019"><i class="fa fa-check"></i><b>8.2</b> Kent Island 2018-2019</a>
<ul>
<li class="chapter" data-level="8.2.1" data-path="visualizing-metrics.html"><a href="visualizing-metrics.html#running-plotting-functions-1"><i class="fa fa-check"></i><b>8.2.1</b> Running plotting functions</a></li>
<li class="chapter" data-level="8.2.2" data-path="visualizing-metrics.html"><a href="visualizing-metrics.html#final-plots-1"><i class="fa fa-check"></i><b>8.2.2</b> Final Plots</a></li>
</ul></li>
<li class="chapter" data-level="8.3" data-path="visualizing-metrics.html"><a href="visualizing-metrics.html#random-subset"><i class="fa fa-check"></i><b>8.3</b> Random subset</a>
<ul>
<li class="chapter" data-level="8.3.1" data-path="visualizing-metrics.html"><a href="visualizing-metrics.html#running-plotting-functions-2"><i class="fa fa-check"></i><b>8.3.1</b> Running plotting functions</a></li>
<li class="chapter" data-level="8.3.2" data-path="visualizing-metrics.html"><a href="visualizing-metrics.html#final-plots-2"><i class="fa fa-check"></i><b>8.3.2</b> Final Plots</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="9" data-path="hidden-markov-modelling-hmm.html"><a href="hidden-markov-modelling-hmm.html"><i class="fa fa-check"></i><b>9</b> Hidden Markov Modelling (HMM)</a>
<ul>
<li class="chapter" data-level="9.1" data-path="hidden-markov-modelling-hmm.html"><a href="hidden-markov-modelling-hmm.html#prep-the-data"><i class="fa fa-check"></i><b>9.1</b> Prep the data</a></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./"></a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="downsampling" class="section level1 hasAnchor" number="6">
<h1><span class="header-section-number">6</span> Downsampling<a href="downsampling.html#downsampling" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<div id="down-sampling-mean-wets" class="section level2 hasAnchor" number="6.1">
<h2><span class="header-section-number">6.1</span> Down-sampling (MEAN wets)<a href="downsampling.html#down-sampling-mean-wets" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<pre><code>**Katie&#39;s Notes:**
Right now the files are logging every 10 minutes, which is too high of a resolution. Need to down-sample the dataset from 10min to some other interval that is meaningful to define states to.

12hrs seems too long given how far birds can move in this time, but 10min is far too short.

Tempted to use 2hr resolution to match GPS. </code></pre>
<p><strong>NOTE:</strong> wet values should be <strong>summed</strong> when down-sampling for calculating proportions, and not mean wets.</p>
<div id="hr-periods" class="section level3 hasAnchor" number="6.1.1">
<h3><span class="header-section-number">6.1.1</span> 2hr Periods<a href="downsampling.html#hr-periods" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb55"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb55-1"><a href="downsampling.html#cb55-1" tabindex="-1"></a><span class="fu">source</span>(here<span class="sc">::</span><span class="fu">here</span>(<span class="st">&quot;utils/downsample_deg.R&quot;</span>), <span class="at">echo =</span> F)</span></code></pre></div>
<pre><code>## 
## =================================================== 
##            YOU LOADED downsample_deg            
##    view this function in wey-dry_analysis/R/utils   
## =================================================== 
## 
## this function subsamples DEG files by an allotted time period
## Combines each 10 minute period into X hr periods
## (define X using bin_time), and takes the sum of
## wets0-20 for each bin_time period.
## 
## 
## - Ensure dependencies in project_settings.R
## - Define downsampled.dir in project_settings.R
## =============================================</code></pre>
<div class="sourceCode" id="cb57"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb57-1"><a href="downsampling.html#cb57-1" tabindex="-1"></a>bin_time <span class="ot">=</span> <span class="dv">2</span></span>
<span id="cb57-2"><a href="downsampling.html#cb57-2" tabindex="-1"></a></span>
<span id="cb57-3"><a href="downsampling.html#cb57-3" tabindex="-1"></a><span class="co">#define deg files to use</span></span>
<span id="cb57-4"><a href="downsampling.html#cb57-4" tabindex="-1"></a>deg_files <span class="ot">&lt;-</span> <span class="fu">list.files</span>(output.dir, <span class="at">pattern =</span> <span class="st">&quot;*.deg&quot;</span>, <span class="at">full.names =</span> <span class="cn">TRUE</span>)<span class="co">#[1:10] #add if you want to subset</span></span>
<span id="cb57-5"><a href="downsampling.html#cb57-5" tabindex="-1"></a></span>
<span id="cb57-6"><a href="downsampling.html#cb57-6" tabindex="-1"></a><span class="co">#set up a furrr plan for using 4 cores</span></span>
<span id="cb57-7"><a href="downsampling.html#cb57-7" tabindex="-1"></a><span class="fu">plan</span>(multisession, <span class="at">workers =</span> <span class="dv">4</span>)</span>
<span id="cb57-8"><a href="downsampling.html#cb57-8" tabindex="-1"></a></span>
<span id="cb57-9"><a href="downsampling.html#cb57-9" tabindex="-1"></a>deg_2hrs <span class="ot">&lt;-</span> <span class="fu">future_map</span>(deg_files, downsample_deg, <span class="at">bin_time =</span> bin_time, <span class="at">.progress =</span> <span class="cn">TRUE</span>)</span>
<span id="cb57-10"><a href="downsampling.html#cb57-10" tabindex="-1"></a></span>
<span id="cb57-11"><a href="downsampling.html#cb57-11" tabindex="-1"></a><span class="fu">plan</span>(sequential)</span></code></pre></div>
<p>wets = 0 means 10min interval was entirely dry
wets = 20 means 10min interval was entirely wet</p>
<pre><code>For one 10min interval,
if wets=1, then 600s/20 = 30 seconds
so 1 unit wets = 30 seconds wet per 10min interval</code></pre>
<p>So our datasetâ€™s <code>wets</code> values now represent the average number of 10-minute intervals that were wet during the 2-hour period. This means each 2hr period has 12 intervals of 10 minutes (600 secs).</p>

</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="total-wetdry.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="proportions-wet.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "section"
}
});
});
</script>

</body>

</html>
